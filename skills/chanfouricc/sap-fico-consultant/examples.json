{
  "description": "Few-shot examples pour calibrer le comportement du skill SAP FICO Expert",
  "version": "1.0.0",
  "examples": [
    {
      "id": "config-fi-mm-account-determination",
      "category": "Configuration",
      "difficulty": "Intermédiaire",
      "user": "Comment configurer l'account determination pour les frais de transport en FI-MM ?",
      "assistant": "**T-code** : `/nOBYC` — Automatic Account Determination (Material Management)\n\n**Tables** : T030 (account determination), EKBE (historique achats), BSEG (postes comptables)\n\n**Configuration clé** :\n- `OBYC` → Transaction/Event key **FR1** (frais de transport à l'achat) ou **FR2** (frais de transport livraison)\n- SPRO : MM → Logistics Invoice Verification → Incoming Invoice → Maintain Default Values for Tax Codes\n\n**Étapes** :\n1. Aller dans `/nOBYC`, sélectionner la transaction key **FR1** (Freight charges)\n2. Définir la règle de détermination : Chart of Accounts + Valuation Class\n3. Affecter le compte de charges transport (ex: 614100 — Transport sur achats)\n4. Si frais conditionnés dans PO : vérifier le pricing procedure MM (condition type FRA1/FRB1)\n5. Tester avec `/nMIGO` (entrée marchandise) puis vérifier la pièce FI générée via `/nFB03`\n6. Contrôler le rapprochement GR/IR si les frais sont planifiés vs réels\n\n**Intégrations** :\n- **FI-MM** : Le compte FR1 alimente directement la comptabilité lors du goods receipt\n- **CO** : Si cost center obligatoire sur le compte, vérifier l'affectation analytique dans le PO\n- **FI-AP** : La facture fournisseur via `/nMIRO` rapproche les frais planifiés\n\n**S/4HANA** : En S/4HANA, la table T030 est toujours utilisée mais les écritures alimentent directement ACDOCA. En Cloud Public Edition, la config se fait via app Fiori **Manage Account Determination** (F3745)."
    },
    {
      "id": "troubleshooting-error-f5025",
      "category": "Troubleshooting",
      "difficulty": "Basique",
      "user": "J'ai l'erreur F5 025 quand j'essaie de poster une écriture. C'est quoi ?",
      "assistant": "**T-code** : `/nOBA7` — Configuration Document Types\n\n**Tables** : T003 (document types), BKPF (en-tête pièce)\n\n**Diagnostic** :\nL'erreur **F5 025** signifie : \"Le type de document XX n'est pas défini pour la société YYYY\". Le type de document que tu utilises n'est pas autorisé dans ta société.\n\n**Étapes de résolution** :\n1. Vérifier le type de document utilisé (SA, KR, RE, etc.) et la société cible\n2. Aller dans `/nOBA7` → vérifier que le document type est bien affecté à la société\n3. Si absent : ajouter l'entrée (Chart of Accounts + Company Code + Document Type)\n4. Vérifier aussi `/nOB52` que la période comptable est ouverte pour ce type de document\n5. Tester le posting à nouveau\n\n**Notes OSS** : Vérifier OSS pour \"F5 025 document type not defined\"\n\n**Intégrations** :\n- Aucun impact cross-module direct. C'est une config FI pure.\n- Attention : si le document type est utilisé par MM (ex: RE pour factures) ou SD (ex: RV pour billing), l'impact est indirect.\n\n**S/4HANA** : Même comportement en S/4HANA. En Cloud Public Edition, la config des document types se fait via SSCUI (Self-Service Configuration UI) dans le scope item **Financial Accounting**."
    },
    {
      "id": "concept-assessment-vs-distribution",
      "category": "Concepts CO",
      "difficulty": "Intermédiaire",
      "user": "Quelle est la différence entre assessment et distribution en CO ?",
      "assistant": "**T-codes** : `/nKSU5` (Assessment) — `/nKSV5` (Distribution)\n\n**Tables** : COSS (coûts secondaires), COSP (coûts primaires), COBK (en-tête CO)\n\n**Configuration** : `/nOKC6` (cycles assessment) — `/nOKC1` (cycles distribution)\n\n**Différence fondamentale** :\n\n**Distribution** :\n- Répartit les **coûts primaires** (nature de coût primaire d'origine conservée)\n- Le récepteur voit la nature de coût d'origine (ex: 612000 — Loyer)\n- Traçabilité complète : on sait exactement quel type de coût a été réparti\n- Table impactée : **COSP** (totaux primaires)\n\n**Assessment** :\n- Répartit les coûts sous une **nature de coût secondaire** (type 42)\n- Le récepteur voit uniquement la nature secondaire (ex: 900000 — Assessment IT)\n- Perte de détail : les coûts d'origine sont agrégés\n- Table impactée : **COSS** (totaux secondaires)\n\n**Cas d'usage** :\n- **Distribution** → Quand le management veut voir le détail des coûts répartis\n- **Assessment** → Quand on veut simplifier et agréger (ex: répartir tous les coûts IT en un bloc)\n\n**Intégrations** :\n- **CO-PA** : Les deux méthodes peuvent alimenter CO-PA si configuré dans le cycle\n- **EC-PCA** : Impact sur le reporting profit center si les récepteurs sont des PC\n\n**S/4HANA** : Fonctionnement identique. Les cycles sont toujours gérés via KSU5/KSV5. En Cloud, utiliser l'app Fiori **Run Allocations** (F2712)."
    },
    {
      "id": "process-grir-clearing",
      "category": "Processus",
      "difficulty": "Avancé",
      "user": "Comment fonctionne le rapprochement GR/IR et comment traiter les écarts en clôture ?",
      "assistant": "**T-codes** : `/nF.13` (GR/IR clearing automatique) — `/nMR11` (Maintenance compte GR/IR)\n\n**Tables** : WRX (soldes GR/IR), EKBE (historique achats), BSEG (postes comptables), T030 (account determination — key WRX)\n\n**Configuration** : `/nOBYC` → Transaction key **WRX** (GR/IR clearing account) + `/nOMJJ` (tolérance facture)\n\n**Processus complet** :\n1. **Goods Receipt** (`/nMIGO`) : Débit Stock / Crédit compte GR/IR (transitoire)\n2. **Invoice Receipt** (`/nMIRO`) : Débit compte GR/IR / Crédit Fournisseur\n3. **Situation normale** : Le compte GR/IR se solde automatiquement (GR = IR)\n4. **Écarts en clôture** : Si GR fait mais IR pas encore reçue → solde résiduel sur GR/IR\n\n**Traitement des écarts (period-end)** :\n1. Lancer `/nF.13` — tente le clearing automatique des postes GR/IR matchés\n2. Analyser les postes ouverts restants via `/nFBL3N` sur le compte GR/IR\n3. Pour les GR sans IR : passer une provision via `/nMR11` (régularisation GR/IR)\n4. MR11 génère une écriture : Débit Charge / Crédit Provision\n5. En période suivante, MR11 contre-passe automatiquement la provision\n\n**Notes OSS** : Vérifier Note **48560** (GR/IR clearing program) et Note **189267** (MR11 configuration)\n\n**Intégrations** :\n- **FI-MM** : Cœur du processus — le compte GR/IR est le pont entre MM et FI\n- **CO** : L'imputation analytique suit le PO (cost center, ordre interne, WBS)\n- **FI-AP** : Le solde fournisseur dépend du rapprochement IR\n\n**S/4HANA** : En S/4HANA, les écritures GR/IR sont dans ACDOCA. Utiliser l'app Fiori **Display GR/IR Clearing Account** (F1917). `/nMR11` reste disponible mais l'app **Manage GR/IR Account Clearing** simplifie le suivi. En Cloud Public Edition, MR11 est remplacé par le scope item **Goods Receipt / Invoice Receipt Reconciliation**."
    },
    {
      "id": "migration-new-asset-accounting",
      "category": "Migration S/4HANA",
      "difficulty": "Expert",
      "user": "Quelles sont les étapes clés pour migrer FI-AA vers New Asset Accounting en S/4HANA ?",
      "assistant": "**T-codes** : `/nFAGLGVTR` (migration outil) — `/nAJRW` (year-end closing AA) — `/nAO90` (New AA config)\n\n**Tables** : ANLA/ANLB/ANLC (classique) → FAAT_DOC_IT/FAAT_PLAN_VALUES (New AA) + ACDOCA (Universal Journal)\n\n**Configuration** : `/nAO90` → Activation New Asset Accounting + `/nOAOB` (depreciation areas mapping)\n\n**Étapes clés de migration** :\n\n1. **Analyse pré-migration** :\n   - Lancer le Simplification Item Check (transaction `/nSIMPL`) pour FI-AA\n   - Inventorier les depreciation areas actives et leur mapping (real-time vs periodic posting)\n   - Vérifier les AuC (Assets under Construction) — settlement rules doivent être propres\n\n2. **Préparation configuration** :\n   - Activer New Asset Accounting via `/nAO90`\n   - Mapper les depreciation areas : toutes doivent poster en real-time dans le ledger (plus de periodic posting en batch)\n   - Configurer le parallel valuation (IFRS, Local GAAP, Tax) par ledger group\n\n3. **Nettoyage données** :\n   - Solder les AuC partiellement capitalisés\n   - Corriger les incohérences FI-AA ↔ FI-GL (report `/nABST2`)\n   - Clôturer l'exercice fiscal proprement (`/nAJRW`)\n\n4. **Migration technique** :\n   - Exécuter `/nFAGLGVTR` pour migrer les données vers les nouvelles tables\n   - Vérifier la cohérence post-migration : totaux ANLC vs FAAT_PLAN_VALUES\n   - Réconcilier avec ACDOCA\n\n5. **Validation** :\n   - Lancer depreciation test (`/nAFAB` en mode test)\n   - Comparer les plans d'amortissement avant/après\n   - Valider le reporting via app Fiori **Fixed Asset Reports** (F2217)\n\n**Notes OSS** : Note **2541557** (New Asset Accounting Migration Guide) — document de référence Simplification List pour FI-AA\n\n**Intégrations** :\n- **FI-GL** : New AA poste en real-time dans ACDOCA — plus de batch reconciliation\n- **CO** : Les imputations CO (cost center, ordre) migrent avec les assets\n- **FI-PS** : Les AuC liés à des projets doivent être vérifiés (settlement rules)\n\n**Cloud Public Edition** : Non applicable — la migration FI-AA est un processus On-Premise/Private Cloud. En Cloud Public, les immobilisations sont gérées nativement en New AA sans migration."
    }
  ]
}
