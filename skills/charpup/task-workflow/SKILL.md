---
name: task-workflow
description: Standardized Planning + Subagent + Progress Report workflow for complex tasks
author: Galatea
version: 1.0.0
---

# Task Execution Workflow

æ ‡å‡†åŒ–ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼Œé€‚ç”¨äºå¤æ‚å¤šæ­¥éª¤ä»»åŠ¡ï¼ˆ>5 tool callsï¼‰ã€‚

## è§¦å‘æ¡ä»¶

å½“ä»»åŠ¡æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ—¶ï¼Œ**å¿…é¡»**ä½¿ç”¨æ­¤å·¥ä½œæµï¼š
- é¢„è®¡éœ€è¦ >5 ä¸ª tool calls
- æ¶‰åŠå¤šä¸ªå­ä»»åŠ¡æˆ–å¹¶è¡Œå¤„ç†
- æ‰§è¡Œæ—¶é—´ >10 åˆ†é’Ÿ
- éœ€è¦ subagent åä½œ

## å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Planning (2-3 min)                              â”‚
â”‚  â€¢ åˆ›å»º task_plan.md                                     â”‚
â”‚  â€¢ æ‹†åˆ†ä»»åŠ¡ä¸ºå¯å¹¶è¡Œæ‰¹æ¬¡                                    â”‚
â”‚  â€¢ é¢„ä¼°æ¯æ‰¹æ¬¡æ—¶é—´                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Subagent Dispatch (å¹¶è¡Œ)                         â”‚
â”‚  â€¢ æ¯æ‰¹æ¬¡æ´¾ç‹¬ç«‹ subagent                                  â”‚
â”‚  â€¢ è®¾ç½® timeout å’Œ label                                 â”‚
â”‚  â€¢ Main agent ä¿æŒå“åº”                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Progress Tracking                               â”‚
â”‚  â€¢ æ¯ 5 åˆ†é’Ÿè‡ªåŠ¨æ±‡æŠ¥                                      â”‚
â”‚  â€¢ æ›´æ–° task_plan.md è¿›åº¦                                â”‚
â”‚  â€¢ å¼‚å¸¸æ—¶ç«‹å³é€šçŸ¥                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Integration & Report (3-5 min)                  â”‚
â”‚  â€¢ æ”¶é›† subagent ç»“æœ                                     â”‚
â”‚  â€¢ æ•´åˆä¸ºç»Ÿä¸€æŠ¥å‘Š                                         â”‚
â”‚  â€¢ æ›´æ–° MEMORY.md                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å·¥å…·ä½¿ç”¨è§„èŒƒ

### Planning
```bash
# ä½¿ç”¨ planning-with-files skill
bash ~/.openclaw/skills/planning-with-files/scripts/init-session.sh
```

### Subagent Dispatch
```javascript
// å¹¶è¡Œæ´¾å¤šä¸ª subagent
const tasks = [
  { label: "research-part1", task: "..." },
  { label: "research-part2", task: "..." }
];

for (const t of tasks) {
  sessions_spawn({
    label: t.label,
    task: t.task,
    timeoutSeconds: 300
  });
}
```

### Progress Reporting
```javascript
// è®¾ç½®å®šæ—¶æ±‡æŠ¥ cron
cron.add({
  name: `progress-${taskId}`,
  schedule: { kind: "every", everyMs: 300000 }, // 5åˆ†é’Ÿ
  payload: {
    kind: "systemEvent",
    text: "ğŸ“Š è¿›åº¦æ£€æŸ¥ - è¯»å– task_plan.md å¹¶æ±‡æŠ¥"
  }
});
```

## Task Plan æ¨¡æ¿

```markdown
# Task Plan - [ä»»åŠ¡åç§°]

**å¯åŠ¨æ—¶é—´**: YYYY-MM-DD HH:MM  
**é¢„è®¡æ—¶é•¿**: XX åˆ†é’Ÿ  
**æ±‡æŠ¥é—´éš”**: 5 åˆ†é’Ÿ

---

## æ‰¹æ¬¡æ¸…å•

| æ‰¹æ¬¡ | ä»»åŠ¡ | è´Ÿè´£ | é¢„ä¼°æ—¶é—´ | çŠ¶æ€ |
|------|------|------|----------|------|
| 1 | [å…·ä½“ä»»åŠ¡] | subagent-1 | 5min | â³ |
| 2 | [å…·ä½“ä»»åŠ¡] | subagent-2 | 5min | â³ |
| 3 | [å…·ä½“ä»»åŠ¡] | galatea | 5min | â³ |

---

## è¿›åº¦è¿½è¸ª

| æ—¶é—´ | æ‰¹æ¬¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|------|
| HH:MM | 1 | âœ… | å®Œæˆ |
| HH:MM | 2 | ğŸ”„ | è¿›è¡Œä¸­ |

---

## é£é™©ä¸é˜»å¡

- [ ] é£é™©1: [æè¿°] â†’ åº”å¯¹æ–¹æ¡ˆ: [æ–¹æ¡ˆ]
- [ ] é˜»å¡ç‚¹: [æè¿°] â†’ éœ€è¦ Master å†³ç­–

---

*æœ€åæ›´æ–°: HH:MM*
```

## æ±‡æŠ¥æ¨¡æ¿

### å®šæ—¶æ±‡æŠ¥æ¶ˆæ¯
```
ğŸ“Š è¿›åº¦æ±‡æŠ¥ #[N] - HH:MM

**å·²å®Œæˆ**: [X/Y] æ‰¹æ¬¡
- âœ… æ‰¹æ¬¡1: [ç®€è¿°]
- ğŸ”„ æ‰¹æ¬¡2: [è¿›åº¦%]
- â³ æ‰¹æ¬¡3: ç­‰å¾…ä¸­

**ä¸‹ä¸€æ­¥**: [è®¡åˆ’]
**é¢„è®¡å®Œæˆ**: [æ—¶é—´]

[å¦‚æœ‰å¼‚å¸¸ï¼Œåœ¨æ­¤æ ‡æ³¨]
```

### å®Œæˆæ±‡æŠ¥æ¶ˆæ¯
```
âœ… ä»»åŠ¡å®Œæˆ - HH:MM

**æ€»è€—æ—¶**: [X] åˆ†é’Ÿ
**å®Œæˆæ‰¹æ¬¡**: [Y/Z]

**å…³é”®æˆæœ**:
- [æˆæœ1]
- [æˆæœ2]

**ç”Ÿæˆæ–‡ä»¶**:
- [æ–‡ä»¶1]
- [æ–‡ä»¶2]

**å¾…åŠ**:
- [ ] [åç»­ä»»åŠ¡]
```

## å¼‚å¸¸å¤„ç†

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| Subagent è¶…æ—¶ | è‡ªåŠ¨é‡è¯•1æ¬¡ï¼Œä»å¤±è´¥åˆ™åˆ‡æ¢ä¸º Galatea æ‰§è¡Œ |
| API é™æµ | æŒ‡æ•°é€€é¿ï¼ˆ1s â†’ 2s â†’ 4s â†’ 8sï¼‰ |
| ä»»åŠ¡é˜»å¡ | ç«‹å³å‘é€æ¶ˆæ¯é€šçŸ¥ Masterï¼Œç­‰å¾…å†³ç­– |
| è¿›åº¦è½å | è°ƒæ•´æ‰¹æ¬¡ä¼˜å…ˆçº§ï¼Œå…ˆå®Œæˆæ ¸å¿ƒä»»åŠ¡ |

## ç¤ºä¾‹: å¤æ‚è°ƒç ”ä»»åŠ¡

**ä»»åŠ¡**: "è°ƒç ” Aã€Bã€C ä¸‰ä¸ªæ–¹æ¡ˆçš„å¯è¡Œæ€§"

**æ‰§è¡Œ**:
1. **Planning** (2min): åˆ›å»º task_plan.mdï¼Œæ‹†åˆ†ä¸º 3 ä¸ªå¹¶è¡Œè°ƒç ”æ‰¹æ¬¡
2. **Dispatch** (1min): åŒæ—¶æ´¾ 3 ä¸ª subagentï¼Œå„è´Ÿè´£ä¸€ä¸ªæ–¹æ¡ˆ
3. **Tracking** (15min): æ¯ 5 åˆ†é’Ÿæ±‡æŠ¥è¿›åº¦
4. **Integration** (3min): æ±‡æ€» 3 ä»½æŠ¥å‘Šï¼Œç”Ÿæˆå¯¹æ¯”åˆ†æ

**æ€»è€—æ—¶**: ~21 åˆ†é’Ÿï¼ˆvs ä¸²è¡Œ ~45 åˆ†é’Ÿï¼‰

## æ³¨æ„äº‹é¡¹

1. **ä¸è¦è¿‡åº¦æ‹†åˆ†**: æ‰¹æ¬¡ç²’åº¦ä»¥ 5-10 åˆ†é’Ÿä¸ºå®œ
2. **ä¿æŒå“åº”**: Main agent å§‹ç»ˆåœ¨çº¿ï¼Œç§’å›ç®€å•è¯¢é—®
3. **åŠæ—¶åŒæ­¥**: æœ‰é‡è¦å‘ç°ç«‹å³æ±‡æŠ¥ï¼Œä¸ç­‰å¾…å®šæ—¶æ±‡æŠ¥
4. **æ–‡æ¡£ä¼˜å…ˆ**: æ‰€æœ‰æˆæœå¿…é¡»è½ç›˜ï¼Œä¸ä¾èµ–å†…å­˜

---

*Workflow Version: 1.0.0*  
*Last Updated: 2026-02-10*
