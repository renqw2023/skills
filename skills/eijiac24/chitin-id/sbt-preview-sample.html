<!DOCTYPE html>
<html>
<head>
  <title>Chitin SBT Preview Sample</title>
  <style>
    body {
      display: flex;
      gap: 40px;
      padding: 40px;
      background: #1a1a1a;
      flex-wrap: wrap;
      justify-content: center;
    }
    .card {
      text-align: center;
    }
    .card h3 {
      color: #fff;
      margin-bottom: 10px;
      font-family: monospace;
    }
    svg {
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .controls {
      width: 100%;
      background: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-family: monospace;
      color: #fff;
    }
    .controls label {
      display: inline-block;
      margin-right: 20px;
      margin-bottom: 10px;
    }
    .controls input {
      width: 60px;
      padding: 4px;
      background: #333;
      border: 1px solid #555;
      color: #fff;
      border-radius: 4px;
    }
    .controls code {
      display: block;
      margin-top: 15px;
      padding: 10px;
      background: #111;
      border-radius: 4px;
      font-size: 12px;
      word-break: break-all;
    }
  </style>
</head>
<body>
  <div class="controls">
    <strong>Adjustable Parameters:</strong><br><br>
    <label>avatarY: <input type="number" id="avatarY" value="71" onchange="update()"></label>
    <label>avatarSize: <input type="number" id="avatarSize" value="186" onchange="update()"></label>
    <label>nameY: <input type="number" id="nameY" value="300" onchange="update()"></label>
    <label>didY: <input type="number" id="didY" value="324" onchange="update()"></label>
    <br><br>
    <strong>Font Size (auto by length):</strong><br>
    <label>maxFont (short): <input type="number" id="maxFont" value="43" onchange="update()"></label>
    <label>minFont (32 chars): <input type="number" id="minFont" value="24" onchange="update()"></label>
    <code id="urlPreview"></code>
  </div>

  <script>
    function getParam(name, def) {
      const url = new URL(window.location);
      return parseInt(url.searchParams.get(name)) || def;
    }

    // Auto font size based on name length (linear interpolation)
    function calcFontSize(name, maxFont, minFont) {
      const len = name.length;
      const minLen = 3;
      const maxLen = 32;
      if (len <= minLen) return maxFont;
      if (len >= maxLen) return minFont;
      // Linear interpolation
      const ratio = (len - minLen) / (maxLen - minLen);
      return Math.round(maxFont - ratio * (maxFont - minFont));
    }

    function update() {
      const p = {
        avatarY: parseInt(document.getElementById('avatarY').value),
        avatarSize: parseInt(document.getElementById('avatarSize').value),
        nameY: parseInt(document.getElementById('nameY').value),
        didY: parseInt(document.getElementById('didY').value),
        maxFont: parseInt(document.getElementById('maxFont').value),
        minFont: parseInt(document.getElementById('minFont').value),
      };

      // Update SVG
      const avatarX = (400 - p.avatarSize) / 2;
      document.querySelectorAll('.avatar-rect').forEach(el => {
        el.setAttribute('x', avatarX);
        el.setAttribute('y', p.avatarY);
        el.setAttribute('width', p.avatarSize);
        el.setAttribute('height', p.avatarSize);
      });
      document.querySelectorAll('.avatar-img').forEach(el => {
        el.setAttribute('x', avatarX + 4);
        el.setAttribute('y', p.avatarY + 4);
        el.setAttribute('width', p.avatarSize - 8);
        el.setAttribute('height', p.avatarSize - 8);
      });
      document.querySelectorAll('.name-text').forEach(el => {
        el.setAttribute('y', p.nameY);
        // Auto font size
        const name = el.textContent;
        el.setAttribute('font-size', calcFontSize(name, p.maxFont, p.minFont));
      });
      document.querySelectorAll('.did-text').forEach(el => {
        el.setAttribute('y', p.didY);
      });
      // Text-only versions: only adjust font size, keep y position
      document.querySelectorAll('.name-text-fixed').forEach(el => {
        const name = el.textContent;
        el.setAttribute('font-size', calcFontSize(name, p.maxFont, p.minFont));
      });

      // Show URL
      const url = `${location.origin}${location.pathname}?avatarY=${p.avatarY}&avatarSize=${p.avatarSize}&nameY=${p.nameY}&didY=${p.didY}&maxFont=${p.maxFont}&minFont=${p.minFont}`;
      document.getElementById('urlPreview').textContent = url;
    }

    // Init from URL params
    window.onload = function() {
      document.getElementById('avatarY').value = getParam('avatarY', 71);
      document.getElementById('avatarSize').value = getParam('avatarSize', 186);
      document.getElementById('nameY').value = getParam('nameY', 300);
      document.getElementById('didY').value = getParam('didY', 324);
      document.getElementById('maxFont').value = getParam('maxFont', 43);
      document.getElementById('minFont').value = getParam('minFont', 24);
      update();
    };
  </script>
  <div class="card">
    <h3>Current (Text Only)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#F5F0E8"/>
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#8A8A8A">CHITIN GENESIS RECORD</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#AEAAA0">SOULBOUND TOKEN</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="106" text-anchor="middle" font-family="monospace" font-size="11" fill="#8A8A8A">#42</text>
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#0D0D0D">molty</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#8A8A8A">did:chitin:8453:molty</text>
      <line x1="80" y1="340" x2="320" y2="340" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#8A8A8A">chitin.id/molty</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#AEAAA0">VERIFIED ON BASE L2 | 2026-02-04 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>With Avatar</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#F5F0E8"/>

      <!-- Header -->
      <text x="200" y="28" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#8A8A8A">CHITIN GENESIS RECORD</text>
      <text x="200" y="42" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#AEAAA0">SOULBOUND TOKEN #42</text>
      <line x1="80" y1="52" x2="320" y2="52" stroke="#E8E0D0" stroke-width="1"/>

      <!-- Avatar -->
      <rect class="avatar-rect" x="120" y="100" width="160" height="160" rx="8" fill="#E8E0D0"/>
      <image class="avatar-img" href="/crab.png" x="124" y="104" width="152" height="152" preserveAspectRatio="xMidYMid slice"/>

      <!-- Name & DID -->
      <text class="name-text" x="200" y="300" text-anchor="middle" font-family="Georgia,serif" font-size="36" fill="#0D0D0D">molty</text>
      <text class="did-text" x="200" y="322" text-anchor="middle" font-family="monospace" font-size="10" fill="#8A8A8A">did:chitin:8453:molty</text>

      <!-- Footer -->
      <line x1="80" y1="345" x2="320" y2="345" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="365" text-anchor="middle" font-family="monospace" font-size="10" fill="#8A8A8A">chitin.id/molty</text>
      <text x="200" y="382" text-anchor="middle" font-family="monospace" font-size="8" fill="#AEAAA0">VERIFIED ON BASE L2 | 2026-02-04 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>Long Name</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#F5F0E8"/>

      <!-- Header -->
      <text x="200" y="28" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#8A8A8A">CHITIN GENESIS RECORD</text>
      <text x="200" y="42" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#AEAAA0">SOULBOUND TOKEN #123</text>
      <line x1="80" y1="52" x2="320" y2="52" stroke="#E8E0D0" stroke-width="1"/>

      <!-- Avatar -->
      <rect class="avatar-rect" x="120" y="100" width="160" height="160" rx="8" fill="#E8E0D0"/>
      <image class="avatar-img" href="/crab.png" x="124" y="104" width="152" height="152" preserveAspectRatio="xMidYMid slice"/>

      <!-- Name & DID (long name uses smaller font) -->
      <text class="name-text" x="200" y="300" text-anchor="middle" font-family="Georgia,serif" font-size="22" fill="#0D0D0D">translator-pro-v2</text>
      <text class="did-text" x="200" y="322" text-anchor="middle" font-family="monospace" font-size="8" fill="#8A8A8A">did:chitin:8453:translator-pro-v2</text>

      <!-- Footer -->
      <line x1="80" y1="345" x2="320" y2="345" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="365" text-anchor="middle" font-family="monospace" font-size="10" fill="#8A8A8A">chitin.id/translator-pro-v2</text>
      <text x="200" y="382" text-anchor="middle" font-family="monospace" font-size="8" fill="#AEAAA0">VERIFIED ON BASE L2 | 2025-12-15 09:00 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>Max Length (32 chars)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#F5F0E8"/>

      <!-- Header -->
      <text x="200" y="28" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#8A8A8A">CHITIN GENESIS RECORD</text>
      <text x="200" y="42" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#AEAAA0">SOULBOUND TOKEN #999</text>
      <line x1="80" y1="52" x2="320" y2="52" stroke="#E8E0D0" stroke-width="1"/>

      <!-- Avatar -->
      <rect class="avatar-rect" x="120" y="100" width="160" height="160" rx="8" fill="#E8E0D0"/>
      <image class="avatar-img" href="/crab.png" x="124" y="104" width="152" height="152" preserveAspectRatio="xMidYMid slice"/>

      <!-- Name & DID (32 char max name) -->
      <text class="name-text" x="200" y="300" text-anchor="middle" font-family="Georgia,serif" font-size="36" fill="#0D0D0D">abcdefghij-abcdefghij-abcdefghij</text>
      <text class="did-text" x="200" y="322" text-anchor="middle" font-family="monospace" font-size="8" fill="#8A8A8A">did:chitin:8453:abcdefghij-abcdefghij-abcdefghij</text>

      <!-- Footer -->
      <line x1="80" y1="345" x2="320" y2="345" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="365" text-anchor="middle" font-family="monospace" font-size="9" fill="#8A8A8A">chitin.id/abcdefghij-abcdefghij-abcdefghij</text>
      <text x="200" y="382" text-anchor="middle" font-family="monospace" font-size="8" fill="#AEAAA0">VERIFIED ON BASE L2 | 2026-01-01 00:00 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 (Navy - 5年)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#0a1628"/>

      <!-- Header -->
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#64748b">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#475569">BASE L2 · #42</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#1e3a5f" stroke-width="1"/>

      <!-- Name centered (no avatar) -->
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#e2e8f0">agent-x</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#94a3b8">ASSISTANT</text>

      <!-- Footer -->
      <line x1="80" y1="340" x2="320" y2="340" stroke="#1e3a5f" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">chitin.id/agent-x</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#475569">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 (Red - 10年)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#1a0a0a"/>

      <!-- Header -->
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#9f7070">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#7f5050">BASE L2 · #42</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#5c2020" stroke-width="1"/>

      <!-- Name centered (no avatar) -->
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#f5e6e6">agent-x</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#c9a0a0">ASSISTANT</text>

      <!-- Footer -->
      <line x1="80" y1="340" x2="320" y2="340" stroke="#5c2020" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#9f7070">chitin.id/agent-x</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#7f5050">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 (Green - 公用)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#0a1a10"/>

      <!-- Header -->
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#6b9f7a">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#4a7f5a">BASE L2 · #42</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#1e5c30" stroke-width="1"/>

      <!-- Name centered (no avatar) -->
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#e6f5ea">agent-x</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#a0c9ad">ASSISTANT</text>

      <!-- Footer -->
      <line x1="80" y1="340" x2="320" y2="340" stroke="#1e5c30" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#6b9f7a">chitin.id/agent-x</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#4a7f5a">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 Short (5文字)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#0a1628"/>
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#64748b">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#475569">BASE L2 · #1</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#1e3a5f" stroke-width="1"/>
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#e2e8f0">molty</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#94a3b8">ASSISTANT</text>
      <line x1="80" y1="340" x2="320" y2="340" stroke="#1e3a5f" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">chitin.id/molty</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#475569">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 Medium (16文字)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#0a1628"/>
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#64748b">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#475569">BASE L2 · #123</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#1e3a5f" stroke-width="1"/>
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#e2e8f0">translator-pro-v2</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#94a3b8">SPECIALIST</text>
      <line x1="80" y1="340" x2="320" y2="340" stroke="#1e3a5f" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">chitin.id/translator-pro-v2</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#475569">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>ERC-8004 Max (32文字)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#0a1628"/>
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#64748b">ERC-8004 AGENT PASSPORT</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#475569">BASE L2 · #999</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#1e3a5f" stroke-width="1"/>
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#e2e8f0">abcdefghij-abcdefghij-abcdefghij</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#94a3b8">OTHER</text>
      <line x1="80" y1="340" x2="320" y2="340" stroke="#1e3a5f" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="9" fill="#64748b">chitin.id/abcdefghij-abcdefghij-abcdefghij</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#475569">CHITIN VERIFIED | 2026-01-20 14:30 UTC</text>
    </svg>
  </div>

  <div class="card">
    <h3>No Avatar (Text Only Fallback)</h3>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="350" height="350">
      <rect width="400" height="400" fill="#F5F0E8"/>

      <!-- Header -->
      <text x="200" y="48" text-anchor="middle" font-family="monospace" font-size="10" letter-spacing="0.25em" fill="#8A8A8A">CHITIN GENESIS RECORD</text>
      <text x="200" y="64" text-anchor="middle" font-family="monospace" font-size="8" letter-spacing="0.15em" fill="#AEAAA0">SOULBOUND TOKEN #99</text>
      <line x1="80" y1="78" x2="320" y2="78" stroke="#E8E0D0" stroke-width="1"/>

      <!-- Name centered (no avatar) -->
      <text class="name-text-fixed" x="200" y="205" text-anchor="middle" font-family="Georgia,serif" font-size="52" fill="#0D0D0D">agent-x</text>
      <text x="200" y="241" text-anchor="middle" font-family="monospace" font-size="12" fill="#8A8A8A">did:chitin:8453:agent-x</text>

      <!-- Footer -->
      <line x1="80" y1="340" x2="320" y2="340" stroke="#E8E0D0" stroke-width="1"/>
      <text x="200" y="360" text-anchor="middle" font-family="monospace" font-size="10" fill="#8A8A8A">chitin.id/agent-x</text>
      <text x="200" y="377" text-anchor="middle" font-family="monospace" font-size="8" fill="#AEAAA0">VERIFIED ON BASE L2 | 2026-01-20 18:45 UTC</text>
    </svg>
  </div>
</body>
</html>
